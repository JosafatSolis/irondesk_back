(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{102:function(e,t,a){},120:function(e,t,a){e.exports=a.p+"static/media/logo.a712b561.png"},121:function(e,t,a){e.exports=a.p+"static/media/playa.94fe1a7a.jpg"},136:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(72),c=a.n(l),o=a(22),i=(a(102),a(55)),u=a(3),s=a(4),m=a(5),d=a(6),k=a(7),p=a(56),h=Object(n.createContext)(),E=a(11),f=a.n(E),b="heroku.com/irondesk";f.a.defaults.withCredentials=!0;var v=function(e){return console.log("baseUrl:",b),f.a.post("".concat(b,"/login"),e)},g=function(){return f.a.post("".concat(b,"/login/logout"))},y=a(120),N=a(121),x=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={credentials:{}},e.handleChange=function(t){var a=e.state.credentials;a=Object(i.a)({},a,Object(p.a)({},t.target.name,t.target.value)),e.setState({credentials:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.context.setUser,n=e.state.credentials,r=e.props.history;v(n).then((function(e){var t=e.data.user;a(t),["Admin","Tecnician"].includes(t.role)?r.push("home/tenants"):r.push("home/tickets/".concat(t.tenant._id))})).catch((function(e){return console.log("Error",e)}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.history,t=this.context.currentUser,a=t._id,n=t.role,r=t.tenant;a&&(["Admin","Tecnician"].includes(n)?e.push("/home/tenants"):e.push("/home/tickets/".concat(r._id)))}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement("section",{style:{backgroundImage:"url(".concat(N,")")},className:"\r uk-background-blend-luminosity\r uk-background-primary  \r uk-height-small uk-panel\r uk-height-viewport \r uk-background-blend-multiply \r uk-background-cover\r uk-flex \r uk-flex-center \r uk-flex-middle"},r.a.createElement("article",{className:"uk-background-muted ",style:{border:"solid 2px #f07e1c",width:"1000px",padding:"10px"}},r.a.createElement("div",{className:"uk-flex uk-flex-center uk-flex-middle uk-margin-large-left"},r.a.createElement("img",{src:y,alt:"company",className:"uk-margin"}),r.a.createElement("form",{className:"uk-form uk-width-1-2 uk-margin-large-top uk-margin-large-left",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("span",{"uk-icon":"icon: users; ratio: 2",className:"uk-margin-small-right"}),r.a.createElement("input",{name:"email",onChange:function(t){return e.handleChange(t)},type:"text",placeholder:"Email",className:"uk-width-1-2 uk-form-large uk-text-center",style:{border:"solid 2px #f07e1c"}}),r.a.createElement("div",{className:"uk-form-password"},r.a.createElement("span",{"uk-icon":"icon: lock; ratio: 2",className:"uk-margin-small-right"}," "),r.a.createElement("input",{name:"password",onChange:function(t){return e.handleChange(t)},className:"uk-margin-small-top uk-width-1-2 uk-form-large uk-text-center",type:"password",placeholder:"Password",style:{border:"solid 2px #f07e1c"}})),r.a.createElement("div",{className:" uk-align-center "},r.a.createElement("button",{className:" uk-align-center uk-button uk-button-primary",style:{backgroundColor:"#f07e1c"}},"Login")))))))}}]),a}(n.Component);x.contextType=h;var C=x,w=a(25),O=a(1),S=function(e){var t=e.touched,a=e.message;return t?a?r.a.createElement("div",{className:"uk-form-danger"}," ",a," "):r.a.createElement("div",{className:"uk-form-success"}," ",r.a.createElement("span",{"uk-icon":"icon: check"})):r.a.createElement("div",{className:"uk-form-danger"}," \xa0 ")},j=O.a().shape({name:O.b().min(1,"Write your name").max(30,"Your name is too long").required("You must have a name"),email:O.b().email("You must enter a valid email").required("You must enter your email"),problem:O.b().min(70,"Please describe with more detail...").max(1e3,"Please use less than 1,000 characters").required("Please enter your problem"),code:O.b().required("You must enter a code"),phone:O.b().required("You must enter your phone")});function U(){return r.a.createElement("div",{className:"uk-position-center uk-vertical-align uk-text-center",style:{border:"solid black",backgroundColor:"#ADD8E6"}},r.a.createElement(w.a,{initialValues:{name:"",email:"",problem:"",code:"",phone:""},validationSchema:j,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;a(!0),setTimeout((function(){alert(JSON.stringify(e,null,2)),n(),a(!1)}),500)}},(function(e){var t=e.values,a=e.errors,n=e.touched,l=e.handleChange,c=e.handleBlur,o=e.handleSubmit,i=e.isSubmitting;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"    Name:       "),r.a.createElement("input",{type:"text",name:"name",id:"name",placeholder:" Enter your name",onChange:l,onBlur:c,value:t.name,style:{width:"40%"},className:n.name&&a.name?"uk-form-danger uk-text-secondary":"uk-form-success uk-text-secondary"}),r.a.createElement("span",{"uk-icon":"user",className:"uk-margin-small-left"}),r.a.createElement(S,{touched:n.name,message:a.name})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email:          "),r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:" Enter your email",onChange:l,onBlur:c,value:t.email,style:{width:"40%"},className:n.email&&a.email?"uk-form-danger uk-text-secondary":"uk-form-success uk-text-secondary"}),r.a.createElement("span",{"uk-icon":"mail",className:"uk-margin-small-left"}),r.a.createElement(S,{touched:n.email,message:a.email})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"code"}," Code :           "),r.a.createElement("input",{type:"text",name:"code",id:"code",placeholder:" Enter your designed code",onChange:l,onBlur:c,value:t.code,style:{width:"40%"},className:n.code&&a.code?"uk-form-danger uk-text-secondary":"uk-form-success uk-text-secondary"}),r.a.createElement("span",{"uk-icon":"info",className:"uk-margin-small-left"}),r.a.createElement(S,{touched:n.code,message:a.code})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"phone"},"Phone:          "),r.a.createElement("input",{type:"text",name:"phone",id:"phone",placeholder:" Enter your phone",onChange:l,onBlur:c,value:t.phone,style:{width:"40%"},className:n.phone&&a.phone?"uk-form-danger uk-text-secondary":"uk-form-success uk-text-secondary"}),r.a.createElement("span",{"uk-icon":"phone",className:"uk-margin-small-left"}),r.a.createElement(S,{touched:n.phone,message:a.phone})),r.a.createElement("div",null,r.a.createElement("textarea",{rows:"6",placeholder:"Describe with detail the problem...",className:n.problem&&a.problemm?"uk-form-danger uk-input uk-text-secondary":"uk-form-success uk-input uk-text-secondary",type:"text",name:"problem",id:"problem",onChange:l,onBlur:c,value:t.problem,style:{width:"70%"}}),r.a.createElement(S,{touched:n.problem,message:a.problem})),r.a.createElement("div",{className:"uk-submit"},r.a.createElement("button",{type:"submit",disabled:i,className:"uk-button uk-button-primary"},"      SUBMIT          ")))})))}var A=a(33),T=a(31),D=a.n(T);O.a().shape({name:O.b().required("\xbfQu\xe9 cliente eres?"),code:O.b().required("Debes incluir un c\xf3digo").min(2,"Por lo menos dos caracteres")});var I=O.a().shape({description:O.b().min(50,"Describe con mayor detalle...").required("Dinos cu\xe1l es el problema")});function q(e){return r.a.createElement(h.Consumer,null,(function(t){var a=t.createTicket;return r.a.createElement("div",null,r.a.createElement(w.a,{initialValues:{description:""},validationSchema:I,onSubmit:function(t,n){var r=n.setSubmitting,l=n.resetForm;r(!0);var c=t.description;r(!1),l(),a(c,e.tenantId)}},(function(e){var t=e.values,a=e.errors,n=e.touched,l=e.handleChange,c=e.handleBlur,o=e.handleSubmit,i=e.isSubmitting;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"description"}," Problema: "),r.a.createElement("textarea",{rows:"6",placeholder:"Describe a detalle el problema...",type:"text",name:"description",id:"description",onChange:l,onBlur:c,value:t.description,className:n.description&&a.description?"uk-form-danger uk-text-secondary uk-text-center uk-input":" uk-form-success uk-text-secondary uk-text-center uk-input"}),r.a.createElement(S,{touched:n.description,message:a.description})),r.a.createElement("div",{className:"uk-submit"},r.a.createElement("button",{type:"submit",disabled:i,className:"uk-button uk-button-primary uk-align-center"}," ","LEVANTAR TICKET"," ")))})))}))}var B={content:{top:"25%",left:"50%",right:"auto",bottom:"auto",width:"40%",height:"50%",transform:"translate(-40%, -20%)",border:"solid 1px #f07e1c"}};var P=function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],l=t[1];return r.a.createElement(h.Consumer,null,(function(e){var t=window.location.pathname.split("/"),n=t[t.length-1];return(n=["tenants","tickets","home"].includes(n)?null:n)?r.a.createElement("section",{className:"uk-margin-top uk-text-center "},r.a.createElement("button",{style:{backgroundColor:"#E5E4E2"},className:"uk-button",onClick:function(){l(!0)}},"NUEVO TICKET [+]"),r.a.createElement(D.a,{isOpen:a,onRequestClose:function(){l(!1)},style:B},r.a.createElement("div",null,r.a.createElement("button",{href:"#",onClick:function(){l(!1)},className:"uk-button-muted uk-align-right"},r.a.createElement("span",{"uk-icon":"icon: close"}," ")),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(q,{tenantId:n}))):null}))},Y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={currentPos:"",homePath:"/home"},e.updateState=function(){var t=e.context.currentUser;["Admin","Tecnician"].includes(t.role)?e.setState({homePath:"/home/tenants"}):e.setState({homePath:"/home/tickets/".concat(t.tenant._id)});var a=window.location.pathname,n=a===e.state.homePath||a.startsWith("/home/tenants")?"":"TICKETS";e.setState({currentPos:n})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"render",value:function(){var e=this,t=this.context,a=t.removeUser,n=t.currentUser,l="User"===n.role?"Usuario":"Admin"===n.role?"Administrador":"T\xe9cnico";return r.a.createElement("nav",{className:"uk-navbar-container uk-navbar"},r.a.createElement("section",{className:"uk-navbar-left"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{className:"uk-margin-right uk-margin-left"},r.a.createElement(o.b,{onClick:function(){return e.updateState()},to:this.state.homePath},"Home")," "),r.a.createElement("li",{className:"uk-button "},r.a.createElement(P,null)))),r.a.createElement("section",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"#",onClick:function(){return e.updateState()}},"Bienvenido ".concat(this.context.currentUser.name," (").concat(this.context.currentUser.tenant.code,")")," ",r.a.createElement("br",null)," ",l)," "),r.a.createElement("li",null,r.a.createElement(o.b,{to:"#",onClick:function(){return a()}},"Logout")," "))))}}]),a}(n.Component);Y.contextType=h;var F=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("article",{className:" uk-card  uk-card-default uk-flex uk-flex-around uk-margin uk-margin-top "},r.a.createElement(o.b,{to:"/home/tickets/".concat(this.props.tenantId)},r.a.createElement("h4",{className:"uk-card-title uk-margin-top"},r.a.createElement("strong",null,this.props.code," - ",this.props.name)),r.a.createElement("div",{className:"uk-card-body"}," Ver Tickets ")))}}]),a}(n.Component),V=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={tenants:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("".concat(b,"/tenants")).then((function(t){var a=t.data;e.setState({tenants:a})})).catch((function(e){return console.log("Error: ",e)}))}},{key:"render",value:function(){return r.a.createElement("section",{className:" uk-margin-left uk-margin-right uk-grid uk-flex-wrap-around uk-child-width-1-1  uk-child-width-1-2@s  uk-child-width-1-3@m"},this.state.tenants.map((function(e){return r.a.createElement(F,{tenantId:e._id,name:e.name,code:e.code,key:e._id})})))}}]),a}(n.Component),_=a(14),R=a.n(_),M=a(65),W=a.n(M);R.a.extend(W.a);var J=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={tick:!1,timerId:0},n.timerId=setInterval((function(){n.setState({tick:!n.state.tick})}),1e3),n}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"render",value:function(){var e=String(parseInt(R()().diff(R()(this.props.reportDate),"hour"))%24),t=String(parseInt(R()().diff(R()(this.props.reportDate),"minute"))%60),a=String(parseInt(R()().diff(R()(this.props.reportDate),"second"))%60);return e=e.length<2?"0"+e:e,t=t.length<2?"0"+t:t,a=a.length<2?"0"+a:a,r.a.createElement("div",{className:"uk-heading-small"},r.a.createElement("span",{"uk-icon":"clock"}),R()().diff(R()(this.props.reportDate),"day")+"d "+e+":"+t+":"+a)}}]),a}(n.Component),L=O.a().shape({description:O.b().min(50,"Por favor incluya m\xe1s informaci\xf3n...").required("Cu\xe9ntanos qu\xe9 problema tienes")});function H(e){return r.a.createElement(h.Consumer,null,(function(t){var a=t.addActivity;return r.a.createElement("div",null,r.a.createElement(w.a,{initialValues:{date:new Date,description:""},validationSchema:L,onSubmit:function(t,n){var r=n.setSubmitting,l=n.resetForm;r(!0);var c=t.date,o=t.description;r(!1),l(),a(e.ticketId,{date:c,activity:o})}},(function(e){var t=e.values,a=e.errors,n=e.touched,l=e.handleChange,c=e.handleBlur,o=e.handleSubmit,i=e.isSubmitting;return r.a.createElement("form",{className:"uk-form",onSubmit:o},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"description"}," Descripci\xf3n: "),r.a.createElement("textarea",{rows:"6",placeholder:"Describe la(s) tarea(s) realizada(s)...",type:"text",name:"description",id:"description",onChange:l,onBlur:c,value:t.description,className:n.description&&a.description?"uk-form-danger uk-text-secondary uk-text-center uk-input":" uk-form-success uk-text-secondary uk-text-center uk-input"}),r.a.createElement(S,{touched:n.description,message:a.description})),r.a.createElement("div",{className:"uk-submit"},r.a.createElement("button",{type:"submit",disabled:i,className:"uk-button uk-button-primary uk-align-center"}," ","AGREGAR ACTIVIDAD"," ")))})))}))}var K={content:{top:"25%",left:"50%",right:"auto",bottom:"auto",width:"40%",height:"30%",transform:"translate(-40%, -20%)",border:"solid 1px #f07e1c"}};var z=function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),l=a[0],c=a[1];return r.a.createElement(h.Consumer,null,(function(t){return r.a.createElement("section",{className:"uk-margin-top uk-text-center "},r.a.createElement("button",{"uk-icon":"icon: plus-circle",onClick:function(){c(!0)}}),r.a.createElement(D.a,{isOpen:l,onRequestClose:function(){c(!1)},style:K},r.a.createElement("div",null,r.a.createElement("button",{href:"#",onClick:function(){c(!1)},className:"uk-button-muted uk-align-right"},r.a.createElement("span",{"uk-icon":"icon: close"}," ")),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(H,{ticketId:e.ticketId})))}))};R.a.extend(W.a);var G=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).assignVisible=function(){return"Closed"!==e.props.status&&["Admin","Tecnician"].includes(e.context.currentUser.role)&&!e.props.tecnicianName},e.validateVisible=function(){return["Admin","Tecnician"].includes(e.context.currentUser.role)&&e.props.tecnicianName&&"Open"===e.props.status},e.closeVisible=function(){return["Admin","User"].includes(e.context.currentUser.role)&&"ClosingRequested"===e.props.status},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.context,a=t.assignTecnician,n=t.updateTicketStatus,l=this.assignVisible(),c=this.validateVisible(),o=this.closeVisible();return r.a.createElement("section",{className:" uk-card  uk-card-default  uk-flex uk-flex-around uk-margin-top"},r.a.createElement("div",{className:"uk-card-body "},r.a.createElement("section",{className:"uk-grid uk-flex-around "},r.a.createElement("article",null,r.a.createElement("div",{className:"Open"===this.props.status?"uk-label-danger":"ClosingRequested"===this.props.status?"uk-label-warning":"uk-label-success"},"Open"===this.props.status?"Abierto":"ClosingRequested"===this.props.status?"Validar":"Cerrado")),r.a.createElement("article",null,r.a.createElement("ul",{className:"uk-iconnav"},r.a.createElement("li",null," ",r.a.createElement("button",{href:"#","uk-icon":"icon: file-edit"})," "),r.a.createElement("li",null," ",r.a.createElement("button",{href:"#","uk-icon":"icon: trash"})," "))),r.a.createElement("article",null,r.a.createElement("div",{className:"uk-label"},this.props.tenantCode))),"Closed"===this.props.status?null:r.a.createElement(J,{reportDate:this.props.reportDate}),r.a.createElement("section",{className:"uk-flex uk-flex-center uk-flex-column uk-child-width-1-1",style:{alignItems:"start",justifyContent:"flex-end"}},r.a.createElement("article",{style:{display:"flex",textAlign:"initial"}},r.a.createElement("div",{className:"uk-width-expand","uk-leader":""},r.a.createElement("span",{"uk-icon":"users"}),r.a.createElement("span",{className:"uk-margin"},"Asignado a")),r.a.createElement("div",{className:"uk-margin-small-left"},this.props.tecnicianName)," ",r.a.createElement("hr",null)),r.a.createElement("article",{className:"container-fluid",style:{textAlign:"initial"}},r.a.createElement("ul",{"uk-accordion":"multiple: true"},r.a.createElement("li",{className:"uk-closed"},r.a.createElement("button",{className:"uk-accordion-title uk-button uk-button-muted uk-width-1-1"},"Descripci\xf3n"),r.a.createElement("div",{className:"uk-accordion-content"},r.a.createElement("article",{className:"uk-comment uk-comment-primary uk-margin"},r.a.createElement("header",{className:"uk-comment-header uk-grid-medium uk-flex-middle"},r.a.createElement("div",{className:"uk-width-expand"},r.a.createElement("h6",{className:"uk-comment-title uk-margin-remove"},r.a.createElement("span",{"uk-icon":"user"})," ",r.a.createElement("span",null,this.props.user)),r.a.createElement("span",null," ",R()(this.props.reportDate).format("D/MM/YYYY h:mm a")," "))),r.a.createElement("div",{className:"uk-comment-body uk-text-justify"}," ",r.a.createElement("p",null,this.props.description)," ")))))),r.a.createElement("section",{className:"container-fluid",style:{textAlign:"initial"}},r.a.createElement("ul",{"uk-accordion":"multiple: true"},r.a.createElement("li",{className:"uk-closed"},r.a.createElement("button",{className:"uk-accordion-title uk-button uk-button-muted uk-width-1-1"},"Actividades"),r.a.createElement("div",{className:"uk-accordion-content"},r.a.createElement("article",{className:"uk-overflow-auto uk-height-small uk-width-max uk-width-auto"},r.a.createElement("table",{className:"uk-table uk-table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Fecha"),r.a.createElement("th",null,"Actividades"))),r.a.createElement("tbody",null,this.props.activities.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,R()(e.date).format("D/MM H:mm")),r.a.createElement("td",null,e.activity))}))))),"Closed"===this.props.status?null:r.a.createElement("article",null,r.a.createElement("ul",{className:"uk-iconnav uk-align-right"},r.a.createElement("li",{className:"uk-margin-small-top"},r.a.createElement(z,{ticketId:this.props.ticketId})))))))),r.a.createElement("div",{className:"uk-grid uk-flex-around"},l?r.a.createElement("div",{className:"uk-align-center"},r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(){return a(e.props.ticketId)}},"ATENDER")):null,c?r.a.createElement("div",null,r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(){return n(e.props.ticketId,{status:"ClosingRequested"})}},"Validar")):null,o?r.a.createElement("div",null,r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(){return n(e.props.ticketId,{status:"Closed"})}},"Cerrar")):null))))}}]),a}(n.Component);G.contextType=h;var Q=function(e){return f.a.post("".concat(b,"/tickets/"),e)},Z=function(e){return f.a.patch("".concat(b,"/tickets/").concat(e._id),e)},$=function(e,t){return f.a.post("".concat(b,"/tickets/").concat(e,"/newactivity"),t)},X=function(e,t){return f.a.patch("".concat(b,"/tickets/").concat(e,"/statusupdate"),t)},ee=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={tickets:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.tenantId;t?function(e){return f.a.get("".concat(b,"/tickets/bytenant/").concat(e))}(t).then((function(t){var a=t.data;e.setState({tickets:a})})).catch((function(e){return console.log("Error: ",e)})):f.a.get("".concat(b,"/tickets/")).then((function(t){e.setState({tickets:t})})).catch((function(e){return console.log("Error: ",e)}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"uk-section"},r.a.createElement("div",{"uk-filter":"target: .js-filter"},r.a.createElement("ul",{className:"uk-margin-left uk-subnav uk-subnav-pill"},r.a.createElement("li",{className:"uk-active","uk-filter-control":""},r.a.createElement("button",{className:"uk-button uk-button-muted",style:{backgroundColor:"black",color:"white"}},"Todos")),r.a.createElement("li",{"uk-filter-control":"[status='Open']"},r.a.createElement("button",{style:{backgroundColor:"red",color:"white"},className:"uk-button uk-button-muted"},"Abiertos")),r.a.createElement("li",{"uk-filter-control":"[status='ClosingRequested']"},r.a.createElement("button",{style:{backgroundColor:"orange",color:"white"},className:"uk-button uk-button-muted"},"Validar")),r.a.createElement("li",{"uk-filter-control":"[status='Closed']"},r.a.createElement("button",{style:{backgroundColor:"green",color:"white"},className:"uk-button uk-button-muted"},"Cerrados"))),r.a.createElement("section",{className:"js-filter  uk-grid uk-flex-wrap-around uk-child-width-1-1  uk-child-width-1-2@s  uk-child-width-1-3@m","uk-scrollspy":"cls: uk-animation-fade; target: .uk-card; delay: 100; repeat: false"},Array.isArray(this.state.tickets)&&this.state.tickets.length?this.state.tickets.map((function(e){return r.a.createElement("section",{key:e._id,status:e.status,className:" uk-card   "},r.a.createElement(G,{key:e._id,ticketId:e._id,status:e.status,tenantCode:e.tenantCode,tecnicianName:e.tecnicianUser?e.tecnicianUser.name:"",user:"".concat(e.clientUser.name," ").concat(e.clientUser.lastName," (").concat(e.clientUser.email,")"),reportDate:e.reportDate,description:e.issueDescription,activities:e.activities,internalNotes:e.internalNotes,closedDate:e.closedDate,clientComments:e.clientComments}))})):null)))}}]),a}(n.Component),te=a(96),ae=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-card-body"},r.a.createElement("div",{className:"uk-grid uk-flex-around"},r.a.createElement("div",null,r.a.createElement("div",{className:"uk-label"},this.props.role)),r.a.createElement("div",null,r.a.createElement("ul",{className:"uk-iconnav"},r.a.createElement("li",null,r.a.createElement("button",{"uk-icon":"icon: file-edit"})),r.a.createElement("li",null,r.a.createElement("button",{"uk-icon":"icon: trash"})))),r.a.createElement("div",null,r.a.createElement("div",{className:"uk-label"},this.props.tenantCode))),r.a.createElement("div",{className:"uk-text-large uk-text-bold uk-margin"},r.a.createElement("span",{"uk-icon":"user"}),"".concat(this.props.name.toUpperCase()," ").concat(this.props.lastName.toUpperCase())),r.a.createElement("div",{className:"uk-flex uk-flex-center uk-flex-column uk-child-width-1-1",style:{alignItems:"start",justifyContent:"flex-end"}},r.a.createElement("div",{style:{display:"flex",textAlign:"initial"}},r.a.createElement("div",{className:"uk-width-expand","uk-leader":""},r.a.createElement("span",{"uk-icon":"mail"}),r.a.createElement("span",{className:"uk-margin"},"Email ")),r.a.createElement("div",{className:"uk-margin-small-left"},this.props.email),r.a.createElement("hr",null))),r.a.createElement("div",{className:"uk-flex uk-flex-center uk-flex-column uk-child-width-1-1",style:{alignItems:"start",justifyContent:"flex-end"}},r.a.createElement("div",{style:{display:"flex",textAlign:"initial"}},r.a.createElement("div",{className:"uk-width-expand","uk-leader":""},r.a.createElement("span",{"uk-icon":"phone"}),r.a.createElement("span",{className:"uk-margin"},"Phone ")),r.a.createElement("div",{className:"uk-margin-small-left"},this.props.phone),r.a.createElement("hr",null))))}}]),a}(n.Component),ne=O.a().shape({name:O.b().min(1,"Write your name").max(20,"Your name is too long").required("You must have a name"),lastName:O.b().min(1,"Write your name").max(20,"Your name is too long").required("You must have a lastname"),email:O.b().email("You must enter a valid email").required("You must enter your email"),tenantCode:O.b().min(1,"Write your code").required("You must have a code"),phone:O.b().required("You must enter your phone"),role:O.b().required("Choose a role")});function re(){return r.a.createElement("div",{className:"uk-margin"},r.a.createElement(w.a,{initialValues:{name:"",lastName:"",email:"",role:"",tenantCode:"",phone:""},validationSchema:ne,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;a(!0),setTimeout((function(){alert(JSON.stringify(e,null,2)),n(),a(!1)}),500)}},(function(e){var t=e.values,a=e.errors,n=e.touched,l=e.handleChange,c=e.handleBlur,o=e.handleSubmit,i=e.isSubmitting;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"    Name:       "),r.a.createElement("input",{type:"text",name:"name",id:"name",placeholder:" Enter your name",onChange:l,onBlur:c,value:t.name,className:n.name&&a.name?"uk-form-danger uk-text-secondary uk-text-center uk-input":" uk-input uk-form-success uk-text-secondary uk-text-center"}),r.a.createElement(S,{touched:n.name,message:a.name})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"lastname"},"    Last Name:       "),r.a.createElement("input",{type:"text",name:"lastName",id:"lastName",placeholder:" Enter your lastname",onChange:l,onBlur:c,value:t.lastName,className:n.name&&a.name?"uk-form-danger uk-text-secondary uk-text-center uk-input":"uk-form-success uk-text-secondary uk-text-center uk-input"}),r.a.createElement(S,{touched:n.lastName,message:a.lastName})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"     Email:            "),r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:" Enter your email",onChange:l,onBlur:c,value:t.email,className:n.email&&a.email?"uk-form-danger uk-text-secondary uk-text-center uk-input":"uk-input uk-text-center uk-form-success uk-text-secondary"}),r.a.createElement(S,{touched:n.email,message:a.email})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"tenantCode"}," Tenant Code:           "),r.a.createElement("input",{type:"text",name:"tenantCode",id:"tenantCode",placeholder:" Enter your designed code",onChange:l,onBlur:c,value:t.tenantCode,className:n.tenantCode&&a.tenantCode?"uk-input uk-text-center uk-form-danger uk-text-secondary uk-text-center":"uk-input uk-text-center uk-form-success uk-text-secondary uk-text-center"}),r.a.createElement(S,{touched:n.tenantCode,message:a.tenantCode})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"role"}," Role:           "),r.a.createElement("select",{name:"role",id:"role",value:t.role,onChange:l,onBlur:c,className:n.role&&a.role?"uk-select uk-form-danger uk-text-secondary uk-text-center":"uk-select uk-form-success uk-text-secondary uk-text-center"},r.a.createElement("option",{value:"",label:"Select a role"}),r.a.createElement("option",{value:"User",label:"User"}),r.a.createElement("option",{value:"Admin",label:"Admin"}),r.a.createElement("option",{value:"Technician",label:"Technician"})),r.a.createElement(S,{touched:n.role,message:a.role})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"phone"},"Phone:          "),r.a.createElement("input",{type:"text",name:"phone",id:"phone",placeholder:" Enter your phone",onChange:l,onBlur:c,value:t.phone,className:n.phone&&a.phone?"uk-input uk-form-danger uk-text-secondary uk-text-center":" uk-input uk-form-success uk-text-secondary uk-text-center"}),r.a.createElement(S,{touched:n.phone,message:a.phone})),r.a.createElement("div",{className:"uk-submit"},r.a.createElement("button",{type:"submit",disabled:i,className:"uk-button uk-button-primary uk-align-center"},"      SUBMIT          ")))})))}var le={content:{top:"25%",left:"50%",right:"auto",bottom:"auto",width:"40%",height:"50%",transform:"translate(-40%, -20%)",border:"solid 1px #f07e1c"}};var ce=function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"uk-margin-top uk-text-center "},r.a.createElement("button",{onClick:function(){l(!0)},className:"uk-button uk-button-primary"},'New "COMPONENT"'),r.a.createElement(D.a,{isOpen:a,onRequestClose:function(){l(!1)},style:le},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){l(!1)},className:"uk-button uk-button-muted uk-align-right"},r.a.createElement("span",{"uk-icon":"icon: close"}," ")),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(re,null)))},oe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={users:[]},f.a.get("".concat(b,"/users")).then((function(e){return n.setState({users:[]})})),n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"uk-section"},r.a.createElement("div",null,"  ",r.a.createElement(ce,null),"        "),r.a.createElement("div",{"uk-filter":"target: .js-filter"},r.a.createElement("ul",{className:"uk-subnav uk-subnav-pill"},r.a.createElement("li",{className:"uk-active","uk-filter-control":""}," ",r.a.createElement("button",null,"Todos"),"   "),Object(te.a)(new Set(this.state.users.map((function(e){return e.tenantCode})))).map((function(e){return r.a.createElement("li",{"uk-filter-control":"[tenant='"+e+"']"},r.a.createElement("button",null,e))}))),r.a.createElement("div",{className:"js-filter uk-grid uk-text-center uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-3@m","uk-scrollspy":"cls: uk-animation-fade; target: .uk-card; delay: 100; repeat: false"},this.props.users.map((function(e){return r.a.createElement("div",{tenant:e.tenantCode,className:"uk-card uk-card-default uk-margin-bottom"},r.a.createElement(ae,{key:e._id,tenantCode:e.tenantCode,role:e.role,name:e.name,lastName:e.lastName,email:e.email,phone:e.phone}))})))))}}]),a}(n.Component),ie=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=[{id:"abc",email:"mario@mapps.com",role:"User",name:"Mario",lastName:"Terrazas",tenantCode:"TR",phone:"55 10 40 50 68"},{id:"bcd",email:"josa@mapps.com",role:"Admin",name:"Josafat",lastName:"Solis",tenantCode:"MAPPS",phone:"55 10 40 00 99"},{id:"bdc",email:"rod@mapps.com",role:"Admin",name:"Rodrigo",lastName:"Amador",tenantCode:"HZ",phone:"55 88 40 00 99"}];return r.a.createElement("div",{className:"App"},r.a.createElement(Y,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/home/tenants",component:V}),r.a.createElement(k.a,{exact:!0,path:"/home/users",component:function(t){return r.a.createElement(oe,Object.assign({},t,{users:e}))}}),r.a.createElement(k.a,{exact:!0,path:"/home/tickets",component:ee}),r.a.createElement(k.a,{exact:!0,path:"/home/tickets/:tenantId",component:ee}),r.a.createElement(k.a,{exact:!0,path:"/home/tickets/new",component:U})))}}]),a}(n.Component);ie.contextType=h;var ue=function(){return r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/",component:C}),r.a.createElement(k.a,{exact:!0,path:"/home/*",component:ie}))},se=(a(136),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:JSON.parse(localStorage.getItem("currentUser"))||{},lastUpdate:{}},e.setUser=function(t){console.log("SetUser",t),localStorage.setItem("currentUser",JSON.stringify(t)),e.setState({currentUser:t})},e.removeUser=function(){localStorage.removeItem("currentUser"),e.setState({currentUser:{}}),g(),e.props.history.push("/")},e.createTicket=function(t,a){var n={status:"Open",tenant:a,clientUser:e.state.currentUser._id,issueDescription:t,reportDate:new Date};Q(n).then((function(t){return e.setState({lastUpdate:Date()})})).catch((function(e){return console.log("Error: ",e)}))},e.assignTecnician=function(t){var a={_id:t,tecnicianUser:e.state.currentUser._id};Z(a).then((function(e){return console.log(e)})).catch((function(e){return console.log("Error: ",e)}))},e.addActivity=function(t,a){$(t,a).then((function(t){console.log(t);var a=new Date;e.setState({lastUpdate:a})})).catch((function(e){return console.log("Error: ",e)}))},e.updateTicketStatus=function(t,a){console.log("TicketID, newStatus",t,a),X(t,a).then((function(t){console.log(t);var a=new Date;e.setState({lastUpdate:a})})).catch((function(e){return console.log("Error: ",e)}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.history,t=this.state.currentUser,a=t._id,n=t.role,r=t.tenant;a?["Admin","Tecnician"].includes(n)?e.push("/home/tenants"):e.push("/home/tickets/".concat(r._id)):e.push("/")}},{key:"render",value:function(){var e=this.state,t=this.setUser,a=this.removeUser,n=this.createTicket,l=this.assignTecnician,c=this.addActivity,o=this.updateTicketStatus;return r.a.createElement(h.Provider,{value:Object(i.a)({},e,{setUser:t,removeUser:a,createTicket:n,assignTecnician:l,addActivity:c,updateTicketStatus:o})},r.a.createElement(ue,null))}}]),a}(n.Component)),me=Object(k.f)(se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(94),ke=a.n(de),pe=(a(137),a(95)),he=a.n(pe);ke.a.use(he.a);var Ee=function(){return r.a.createElement(o.a,null,r.a.createElement(me,null))};c.a.render(r.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,a){e.exports=a(138)}},[[97,1,2]]]);
//# sourceMappingURL=main.a436b14f.chunk.js.map