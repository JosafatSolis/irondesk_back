(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{117:function(e,t,a){e.exports=a.p+"static/media/logo.a712b561.png"},118:function(e,t,a){e.exports=a.p+"static/media/playa.94fe1a7a.jpg"},133:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(70),i=a.n(c),l=a(21),s=(a(99),a(54)),o=a(5),u=a(6),m=a(7),d=a(8),p=a(2),k=a(55),h=Object(n.createContext)(),f=a(12),E=a.n(f),b="http://irondesk.herokuapp.com/api";E.a.defaults.withCredentials=!0;var v=function(e){return E.a.post("".concat(b,"/login"),e)},g=function(){return E.a.post("".concat(b,"/login/logout"))},y=a(117),N=a(118),x=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={credentials:{}},e.handleChange=function(t){var a=e.state.credentials;a=Object(s.a)({},a,Object(k.a)({},t.target.name,t.target.value)),e.setState({credentials:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.context.setUser,n=e.state.credentials,r=e.props.history;v(n).then((function(e){var t=e.data.user;a(t),["Admin","Tecnician"].includes(t.role)?r.push("home/tenants"):r.push("home/tickets/".concat(t.tenant._id))})).catch((function(e){return console.log("Error",e)}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.history,t=this.context.currentUser,a=t._id,n=t.role,r=t.tenant;a&&(["Admin","Tecnician"].includes(n)?e.push("/home/tenants"):e.push("/home/tickets/".concat(r._id)))}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement("section",{style:{backgroundImage:"url(".concat(N,")")},className:"\r uk-background-blend-luminosity\r uk-background-primary  \r uk-height-small uk-panel\r uk-height-viewport \r uk-background-blend-multiply \r uk-background-cover\r uk-flex \r uk-flex-center \r uk-flex-middle"},r.a.createElement("article",{className:"uk-background-muted ",style:{border:"solid 2px #f07e1c",width:"1000px",padding:"10px"}},r.a.createElement("div",{className:"uk-flex uk-flex-center uk-flex-middle uk-margin-large-left"},r.a.createElement("img",{src:y,alt:"company",className:"uk-margin"}),r.a.createElement("form",{className:"uk-form uk-width-1-2 uk-margin-large-top uk-margin-large-left",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("span",{"uk-icon":"icon: users; ratio: 2",className:"uk-margin-small-right"}),r.a.createElement("input",{name:"email",onChange:function(t){return e.handleChange(t)},type:"text",placeholder:"Email",className:"uk-width-1-2 uk-form-large uk-text-center",style:{border:"solid 2px #f07e1c"}}),r.a.createElement("div",{className:"uk-form-password"},r.a.createElement("span",{"uk-icon":"icon: lock; ratio: 2",className:"uk-margin-small-right"}," "),r.a.createElement("input",{name:"password",onChange:function(t){return e.handleChange(t)},className:"uk-margin-small-top uk-width-1-2 uk-form-large uk-text-center",type:"password",placeholder:"Password",style:{border:"solid 2px #f07e1c"}})),r.a.createElement("div",{className:" uk-align-center "},r.a.createElement("button",{className:" uk-align-center uk-button uk-button-primary",style:{backgroundColor:"#f07e1c"}},"Login")))))))}}]),a}(n.Component);x.contextType=h;var C=x,O=a(48),w=a(37),j=a.n(w),S=a(49),A=a(24),U=function(e){var t=e.touched,a=e.message;return t?a?r.a.createElement("div",{className:"uk-form-danger"}," ",a," "):r.a.createElement("div",{className:"uk-form-success"}," ",r.a.createElement("span",{"uk-icon":"icon: check"})):r.a.createElement("div",{className:"uk-form-danger"}," \xa0 ")};A.a().shape({name:A.b().required("\xbfQu\xe9 cliente eres?"),code:A.b().required("Debes incluir un c\xf3digo").min(2,"Por lo menos dos caracteres")});var I=A.a().shape({description:A.b().min(50,"Describe con mayor detalle...").required("Dinos cu\xe1l es el problema")});function D(e){return r.a.createElement(h.Consumer,null,(function(t){var a=t.createTicket;return r.a.createElement("div",null,r.a.createElement(S.a,{initialValues:{description:""},validationSchema:I,onSubmit:function(t,n){var r=n.setSubmitting,c=n.resetForm;r(!0);var i=t.description;r(!1),c(),e.setModalIsOpen(!1),a(i,e.tenantId)}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,s=e.isSubmitting;return r.a.createElement("form",{onSubmit:l},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"description"}," Problema: "),r.a.createElement("textarea",{rows:"6",placeholder:"Describe a detalle el problema...",type:"text",name:"description",id:"description",onChange:c,onBlur:i,value:t.description,className:n.description&&a.description?"uk-form-danger uk-text-secondary uk-text-center uk-input":" uk-form-success uk-text-secondary uk-text-center uk-input"}),r.a.createElement(U,{touched:n.description,message:a.description})),r.a.createElement("div",{className:"uk-submit"},r.a.createElement("button",{type:"submit",disabled:s,className:"uk-button uk-button-primary uk-align-center"}," ","LEVANTAR TICKET"," ")))})))}))}var T={content:{top:"25%",left:"50%",right:"auto",bottom:"auto",width:"40%",height:"50%",transform:"translate(-40%, -20%)",border:"solid 1px #f07e1c"}};var _=function(){var e=Object(n.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1];return r.a.createElement(h.Consumer,null,(function(e){var t=window.location.pathname.split("/"),n=t[t.length-1];return(n=["tenants","tickets","home"].includes(n)?null:n)?r.a.createElement("section",{className:"uk-margin-top uk-text-center "},r.a.createElement("button",{style:{backgroundColor:"#E5E4E2"},className:"uk-button",onClick:function(){c(!0)}},"NUEVO TICKET [+]"),r.a.createElement(j.a,{isOpen:a,onRequestClose:function(){c(!1)},style:T,ariaHideApp:!1},r.a.createElement("div",null,r.a.createElement("button",{href:"#",onClick:function(){c(!1)},className:"uk-button-muted uk-align-right"},r.a.createElement("span",{"uk-icon":"icon: close"}," ")),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(D,{tenantId:n,setModalIsOpen:c}))):null}))},V=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currentPos:"",homePath:"/home"},e.updateState=function(){var t=e.context.currentUser;["Admin","Tecnician"].includes(t.role)?e.setState({homePath:"/home/tenants"}):e.setState({homePath:"/home/tickets/".concat(t.tenant._id)});var a=window.location.pathname,n=a===e.state.homePath||a.startsWith("/home/tenants")?"":"TICKETS";e.setState({currentPos:n})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"render",value:function(){var e=this,t=this.context,a=t.removeUser,n=t.currentUser,c="User"===n.role?"Usuario":"Admin"===n.role?"Administrador":"T\xe9cnico";return r.a.createElement("nav",{className:"uk-navbar-container uk-navbar"},r.a.createElement("section",{className:"uk-navbar-left"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{className:"uk-margin-right uk-margin-left"},r.a.createElement(l.b,{onClick:function(){return e.updateState()},to:this.state.homePath},"Home")," "),r.a.createElement("li",{className:"uk-button "},r.a.createElement(_,null)))),r.a.createElement("section",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement(l.b,{to:"#",onClick:function(){return e.updateState()}},"Bienvenido ".concat(this.context.currentUser.name," (").concat(this.context.currentUser.tenant.code,")")," ",r.a.createElement("br",null)," ",c)," "),r.a.createElement("li",null,r.a.createElement(l.b,{to:"#",onClick:function(){return a()}},"Logout")," "))))}}]),a}(n.Component);V.contextType=h;var M=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("article",{className:" uk-card  uk-card-default uk-flex uk-flex-around uk-margin uk-margin-top "},r.a.createElement(l.b,{to:"/home/tickets/".concat(this.props.tenantId)},r.a.createElement("h4",{className:"uk-card-title uk-margin-top"},r.a.createElement("strong",null,this.props.code," - ",this.props.name)),r.a.createElement("div",{className:"uk-card-body"}," Ver Tickets ")))}}]),a}(n.Component),q=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={tenants:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat(b,"/tenants")).then((function(t){var a=t.data;e.setState({tenants:a})})).catch((function(e){return console.log("Error: ",e)}))}},{key:"render",value:function(){return r.a.createElement("section",{className:" uk-margin-left uk-margin-right uk-grid uk-flex-wrap-around uk-child-width-1-1  uk-child-width-1-2@s  uk-child-width-1-3@m"},this.state.tenants.map((function(e){return r.a.createElement(M,{tenantId:e._id,name:e.name,code:e.code,key:e._id})})))}}]),a}(n.Component),P=a(13),R=a.n(P),B=a(63),F=a.n(B);R.a.extend(F.a);var H=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={tick:!1,timerId:0},n.timerId=setInterval((function(){n.setState({tick:!n.state.tick})}),1e3),n}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"render",value:function(){var e=String(parseInt(R()().diff(R()(this.props.reportDate),"hour"))%24),t=String(parseInt(R()().diff(R()(this.props.reportDate),"minute"))%60),a=String(parseInt(R()().diff(R()(this.props.reportDate),"second"))%60);return e=e.length<2?"0"+e:e,t=t.length<2?"0"+t:t,a=a.length<2?"0"+a:a,r.a.createElement("div",{className:"uk-heading-small"},r.a.createElement("span",{"uk-icon":"clock"}),R()().diff(R()(this.props.reportDate),"day")+"d "+e+":"+t+":"+a)}}]),a}(n.Component),J=A.a().shape({description:A.b().min(50,"Por favor incluya m\xe1s informaci\xf3n...").required("Cu\xe9ntanos qu\xe9 problema tienes")});function W(e){return r.a.createElement(h.Consumer,null,(function(t){var a=t.addActivity;return r.a.createElement("div",null,r.a.createElement(S.a,{initialValues:{date:new Date,description:""},validationSchema:J,onSubmit:function(t,n){var r=n.setSubmitting,c=n.resetForm;r(!0);var i=t.date,l=t.description;r(!1),c(),e.setModalIsOpen(!1),a(e.ticketId,{date:i,activity:l})}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,s=e.isSubmitting;return r.a.createElement("form",{className:"uk-form",onSubmit:l},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"description"}," Descripci\xf3n: "),r.a.createElement("textarea",{rows:"6",placeholder:"Describe la(s) tarea(s) realizada(s)...",type:"text",name:"description",id:"description",onChange:c,onBlur:i,value:t.description,className:n.description&&a.description?"uk-form-danger uk-text-secondary uk-text-center uk-input":" uk-form-success uk-text-secondary uk-text-center uk-input"}),r.a.createElement(U,{touched:n.description,message:a.description})),r.a.createElement("div",{className:"uk-submit"},r.a.createElement("button",{type:"submit",disabled:s,className:"uk-button uk-button-primary uk-align-center"}," ","AGREGAR ACTIVIDAD"," ")))})))}))}var Y={content:{top:"25%",left:"50%",right:"auto",bottom:"auto",width:"40%",height:"30%",transform:"translate(-40%, -20%)",border:"solid 1px #f07e1c"}};var K=function(e){var t=Object(n.useState)(!1),a=Object(O.a)(t,2),c=a[0],i=a[1];return r.a.createElement(h.Consumer,null,(function(t){return r.a.createElement("section",{className:"uk-margin-top uk-text-center "},r.a.createElement("button",{"uk-icon":"icon: plus-circle",onClick:function(){i(!0)}}),r.a.createElement(j.a,{isOpen:c,onRequestClose:function(){i(!1)},style:Y,ariaHideApp:!1},r.a.createElement("div",null,r.a.createElement("button",{href:"#",onClick:function(){i(!1)},className:"uk-button-muted uk-align-right"},r.a.createElement("span",{"uk-icon":"icon: close"}," ")),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(W,{ticketId:e.ticketId,setModalIsOpen:i})))}))};R.a.extend(F.a);var L=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).assignVisible=function(){return"Closed"!==e.props.status&&["Admin","Tecnician"].includes(e.context.currentUser.role)&&!e.props.tecnicianName},e.validateVisible=function(){return["Admin","Tecnician"].includes(e.context.currentUser.role)&&e.props.tecnicianName&&"Open"===e.props.status},e.closeVisible=function(){return["Admin","User"].includes(e.context.currentUser.role)&&"ClosingRequested"===e.props.status},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.context,a=t.assignTecnician,n=t.updateTicketStatus,c=this.assignVisible(),i=this.validateVisible(),l=this.closeVisible();return r.a.createElement("section",{className:" uk-card  uk-card-default  uk-flex uk-flex-around uk-margin-top"},r.a.createElement("div",{className:"uk-card-body "},r.a.createElement("section",{className:"uk-grid uk-flex-around "},r.a.createElement("article",null,r.a.createElement("div",{className:"Open"===this.props.status?"uk-label-danger":"ClosingRequested"===this.props.status?"uk-label-warning":"uk-label-success"},"Open"===this.props.status?"Abierto":"ClosingRequested"===this.props.status?"Validar":"Cerrado")),r.a.createElement("article",null,r.a.createElement("ul",{className:"uk-iconnav"},r.a.createElement("li",null," ",r.a.createElement("button",{href:"#","uk-icon":"icon: file-edit"})," "),r.a.createElement("li",null," ",r.a.createElement("button",{href:"#","uk-icon":"icon: trash"})," "))),r.a.createElement("article",null,r.a.createElement("div",{className:"uk-label"},this.props.tenantCode))),"Closed"===this.props.status?null:r.a.createElement(H,{reportDate:this.props.reportDate}),r.a.createElement("section",{className:"uk-flex uk-flex-center uk-flex-column uk-child-width-1-1",style:{alignItems:"start",justifyContent:"flex-end"}},r.a.createElement("article",{style:{display:"flex",textAlign:"initial"}},r.a.createElement("div",{className:"uk-width-expand","uk-leader":""},r.a.createElement("span",{"uk-icon":"users"}),r.a.createElement("span",{className:"uk-margin"},"Asignado a")),r.a.createElement("div",{className:"uk-margin-small-left"},this.props.tecnicianName)," ",r.a.createElement("hr",null)),r.a.createElement("article",{className:"container-fluid",style:{textAlign:"initial"}},r.a.createElement("ul",{"uk-accordion":"multiple: true"},r.a.createElement("li",{className:"uk-closed"},r.a.createElement("button",{className:"uk-accordion-title uk-button uk-button-muted uk-width-1-1"},"Descripci\xf3n"),r.a.createElement("div",{className:"uk-accordion-content"},r.a.createElement("article",{className:"uk-comment uk-comment-primary uk-margin"},r.a.createElement("header",{className:"uk-comment-header uk-grid-medium uk-flex-middle"},r.a.createElement("div",{className:"uk-width-expand"},r.a.createElement("h6",{className:"uk-comment-title uk-margin-remove"},r.a.createElement("span",{"uk-icon":"user"})," ",r.a.createElement("span",null,this.props.user)),r.a.createElement("span",null," ",R()(this.props.reportDate).format("D/MM/YYYY h:mm a")," "))),r.a.createElement("div",{className:"uk-comment-body uk-text-justify"}," ",r.a.createElement("p",null,this.props.description)," ")))))),r.a.createElement("section",{className:"container-fluid",style:{textAlign:"initial"}},r.a.createElement("ul",{"uk-accordion":"multiple: true"},r.a.createElement("li",{className:"uk-closed"},r.a.createElement("button",{className:"uk-accordion-title uk-button uk-button-muted uk-width-1-1"},"Actividades"),r.a.createElement("div",{className:"uk-accordion-content"},r.a.createElement("article",{className:"uk-overflow-auto uk-height-small uk-width-max uk-width-auto"},r.a.createElement("table",{className:"uk-table uk-table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Fecha"),r.a.createElement("th",null,"Actividades"))),r.a.createElement("tbody",null,this.props.activities.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,R()(e.date).format("D/MM H:mm")),r.a.createElement("td",null,e.activity))}))))),"Closed"===this.props.status?null:r.a.createElement("article",null,r.a.createElement("ul",{className:"uk-iconnav uk-align-right"},r.a.createElement("li",{className:"uk-margin-small-top"},r.a.createElement(K,{ticketId:this.props.ticketId})))))))),r.a.createElement("div",{className:"uk-grid uk-flex-around"},c?r.a.createElement("div",{className:"uk-align-center"},r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(){return a(e.props.ticketId)}},"ATENDER")):null,i?r.a.createElement("div",null,r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(){return n(e.props.ticketId,{status:"ClosingRequested"})}},"Validar")):null,l?r.a.createElement("div",null,r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(){return n(e.props.ticketId,{status:"Closed"})}},"Cerrar")):null))))}}]),a}(n.Component);L.contextType=h;var G=function(e){return E.a.post("".concat(b,"/tickets/"),e)},z=function(e){return E.a.patch("".concat(b,"/tickets/").concat(e._id),e)},Q=function(e,t){return E.a.post("".concat(b,"/tickets/").concat(e,"/newactivity"),t)},$=function(e,t){return E.a.patch("".concat(b,"/tickets/").concat(e,"/statusupdate"),t)},X=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={tickets:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.tenantId;t?function(e){return E.a.get("".concat(b,"/tickets/bytenant/").concat(e))}(t).then((function(t){var a=t.data;e.setState({tickets:a})})).catch((function(e){return console.log("Error: ",e)})):E.a.get("".concat(b,"/tickets/")).then((function(t){e.setState({tickets:t})})).catch((function(e){return console.log("Error: ",e)}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"uk-section"},r.a.createElement("div",{"uk-filter":"target: .js-filter"},r.a.createElement("ul",{className:"uk-margin-left uk-subnav uk-subnav-pill"},r.a.createElement("li",{className:"uk-active","uk-filter-control":""},r.a.createElement("button",{className:"uk-button uk-button-muted",style:{backgroundColor:"black",color:"white"}},"Todos")),r.a.createElement("li",{"uk-filter-control":"[status='Open']"},r.a.createElement("button",{style:{backgroundColor:"red",color:"white"},className:"uk-button uk-button-muted"},"Abiertos")),r.a.createElement("li",{"uk-filter-control":"[status='ClosingRequested']"},r.a.createElement("button",{style:{backgroundColor:"orange",color:"white"},className:"uk-button uk-button-muted"},"Validar")),r.a.createElement("li",{"uk-filter-control":"[status='Closed']"},r.a.createElement("button",{style:{backgroundColor:"green",color:"white"},className:"uk-button uk-button-muted"},"Cerrados"))),r.a.createElement("section",{className:"js-filter  uk-grid uk-flex-wrap-around uk-child-width-1-1  uk-child-width-1-2@s  uk-child-width-1-3@m","uk-scrollspy":"cls: uk-animation-fade; target: .uk-card; delay: 100; repeat: false"},Array.isArray(this.state.tickets)&&this.state.tickets.length?this.state.tickets.map((function(e){return r.a.createElement("section",{key:e._id,status:e.status,className:" uk-card   "},r.a.createElement(L,{key:e._id,ticketId:e._id,status:e.status,tenantCode:e.tenantCode,tecnicianName:e.tecnicianUser?e.tecnicianUser.name:"",user:"".concat(e.clientUser.name," ").concat(e.clientUser.lastName," (").concat(e.clientUser.email,")"),reportDate:e.reportDate,description:e.issueDescription,activities:e.activities,internalNotes:e.internalNotes,closedDate:e.closedDate,clientComments:e.clientComments}))})):null)))}}]),a}(n.Component),Z=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(V,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/home/tenants",component:q}),r.a.createElement(p.a,{exact:!0,path:"/home/tickets",component:X}),r.a.createElement(p.a,{exact:!0,path:"/home/tickets/:tenantId",component:X})))}}]),a}(n.Component);Z.contextType=h;var ee=function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:C}),r.a.createElement(p.a,{exact:!0,path:"/home/*",component:Z}))},te=(a(133),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:JSON.parse(localStorage.getItem("currentUser"))||{},lastUpdate:{}},e.setUser=function(t){localStorage.setItem("currentUser",JSON.stringify(t)),e.setState({currentUser:t})},e.removeUser=function(){localStorage.removeItem("currentUser"),e.setState({currentUser:{}}),g(),e.props.history.push("/")},e.createTicket=function(t,a){var n=e.state.currentUser,r=e.props.history,c={status:"Open",tenant:a,clientUser:n._id,issueDescription:t,reportDate:new Date};G(c).then((function(t){e.setState({lastUpdate:Date()}),r.push("/")})).catch((function(e){return console.log("Error: ",e)}))},e.assignTecnician=function(t){var a=e.state.currentUser,n=e.props.history,r={_id:t,tecnicianUser:a._id};z(r).then((function(e){return n.push("/")})).catch((function(e){return console.log("Error: ",e)}))},e.addActivity=function(t,a){var n=e.props.history;Q(t,a).then((function(e){n.push("/")})).catch((function(e){return console.log("Error: ",e)}))},e.updateTicketStatus=function(t,a){var n=e.props.history;$(t,a).then((function(e){n.push("/")})).catch((function(e){return console.log("Error: ",e)}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.history,t=this.state.currentUser,a=t._id,n=t.role,r=t.tenant;a?["Admin","Tecnician"].includes(n)?e.push("/home/tenants"):e.push("/home/tickets/".concat(r._id)):e.push("/")}},{key:"render",value:function(){var e=this.state,t=this.setUser,a=this.removeUser,n=this.createTicket,c=this.assignTecnician,i=this.addActivity,l=this.updateTicketStatus;return r.a.createElement(h.Provider,{value:Object(s.a)({},e,{setUser:t,removeUser:a,createTicket:n,assignTecnician:c,addActivity:i,updateTicketStatus:l})},r.a.createElement(ee,null))}}]),a}(n.Component)),ae=Object(p.f)(te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=a(92),re=a.n(ne),ce=(a(134),a(93)),ie=a.n(ce);re.a.use(ie.a);var le=function(){return r.a.createElement(l.a,null,r.a.createElement(ae,null))};i.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,t,a){e.exports=a(135)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.555e45ac.chunk.js.map